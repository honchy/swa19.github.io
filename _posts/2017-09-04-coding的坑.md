---
layout: post
title: "coding的坑"
date: 2017-09-04 22:34:21 +0800
tags: tips
---

# mysql
1. mysql alias

今天线上sql查询数据时sql报错，看下报错的sql：

~~~
<select id="queryData">
    SELECT <include refid="columns"></include>
    FROM table1 t1
    <if test="condition1">
        INNER JOIN table2 t2 ON t1.column1 = t2.column1
    </if>
    <if test="condition2">
        INNER JOIN table3 t3 ON t1.column1 = t3.column1
    </if>  
    LEFT JOIN table4 t4 ON t1.column1 = t4.column1   
</select>
~~~

错误日志：

~~~
### Error querying database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Not unique table/alias: 'kr'
### The error may exist in lixincui-core-sqlmap/lixincui/Workspace.xml
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Not unique table/alias: 'kr'
~~~

在mysql中，对数据表的别名是不能够重复的，否则就会出现上边的问题


# java

1. java引用

对变量做临时赋值后，后续在用的时候没有恢复成原有的值

由于java中的变量传递的是变量的引用，所以在方法内对一个变量做的改变在这个方法调用结束之后会继续保留，这个错误很弱智，但也很容易被忽略



